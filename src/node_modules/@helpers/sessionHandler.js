import { goto } from "@sapper/app";

//REQUIRE USER IS LOGEEDIN - PAGES REESTRICTION
export const loginRequire = async (userInfo) => {
    if (userInfo.loggedin != true || userInfo.username == undefined) {
        await goto("/login");
    }
}
//REQUIRE LOGOUT USER - PAGES LIKE LOGIN OR SIGUP
export const logoutRequire = async (userInfo) => {
    if (userInfo.loggedin == true || userInfo.username != undefined) {
        await goto("/dashboard");
    }
}
//FIRST LOAD OF ANY PAGE WILL CHECK CURRENT USER SESSION AND IF REQUIRE LOGGEDIN
export const handleUserSession = async (userData, reqLog) => {

    //If userSession route require login user
    if (reqLog == true) {
     
        //If not loggedin
        if (userData.loggedin != true || userData.username == undefined) {
            await goto("/login");
        } else {
            return true;
        }
    }

};