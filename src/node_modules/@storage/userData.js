import { writable } from 'svelte/store';

export let userSession = writable({ loggedin:false,status:3 })


export function createSession(req,dbUser){
	req.session.userId = dbUser.user_id
	req.session.username = dbUser.username
	req.session.useremail = dbUser.email
	req.session.status = dbUser.status
	req.session.loggedin = true
	return userInfo(req)
}

export function destroySession(req){
	req.session.userId = undefined
	req.session.username = undefined
	req.session.useremail = undefined
	req.session.status = undefined
	req.session.loggedin = false
	return userInfo(req)
}


let userInfo = (req) => {
	
    let userInfo = { 
		username: req.session.username,
		useremail: req.session.useremail,
		loggedin: req.session.loggedin,
		status: req.session.status
   }
   return userInfo
}
